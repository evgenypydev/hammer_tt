# Проект: Аутентификация по номеру телефона с инвайт-кодами

Этот проект представляет собой API, разработанное с использованием **Django Rest Framework** (DRF), которое позволяет пользователям аутентифицироваться по номеру телефона и 4-значному коду подтверждения. После аутентификации пользователи получают уникальные инвайт-коды и могут активировать инвайт-коды других пользователей. API документировано с помощью **drf-spectacular**, предоставляя удобный доступ через Swagger UI и Redoc.

## Содержание

- [Функциональность](#функциональность)
- [Технологии](#технологии)
- [Предварительные требования](#предварительные-требования)
- [Установка и запуск](#установка-и-запуск)
  - [Шаги установки](#шаги-установки)
- [API документация](#api-документация)
  - [Аутентификация](#аутентификация)
  - [Эндпоинты](#эндпоинты)
- [Тестирование](#тестирование)
- [Примечания](#примечания)

## Функциональность

- **Аутентификация по номеру телефона и коду подтверждения**: Пользователи могут зарегистрироваться и войти в систему, используя свой номер телефона и 4-значный код подтверждения.
- **Инвайт-коды**: Каждому пользователю при первой аутентификации присваивается уникальный 6-символьный инвайт-код (состоящий из букв и цифр).
- **Активация инвайт-кода**: Пользователи могут активировать инвайт-код другого пользователя (только один раз).
- **Профиль пользователя**: Пользователи могут просматривать свой профиль, включая информацию о своем инвайт-коде и список пользователей, которые активировали их инвайт-код.
- **Документация API**: Автоматически сгенерированная документация с использованием `drf-spectacular`, доступная через Swagger UI и Redoc.

## Технологии

- **Python 3.8+**
- **Django 3.x**
- **Django Rest Framework**
- **drf-spectacular**
- **djangorestframework-simplejwt**
- **Docker**
- **Docker Compose**

## Предварительные требования

- **Docker** и **Docker Compose** должны быть установлены на вашем компьютере.

## Установка и запуск

### Шаги установки

1.**Переименуйте файл окружения:**

   Переименуйте `.env.dev` в `.env`:

   ```bash
   mv .env.dev .env
   ```

2.**Дайте права на выполнение скрипта `entrypoint.sh`:**

   ```bash
   chmod +x entrypoint.sh
   ```

3.**Запустите контейнеры с помощью Docker Compose:**

   ```bash
   docker-compose up -d
   ```

4.**Доступ к приложению:**

   Приложение будет доступно по адресу [http://localhost:8000/](http://localhost:8000/)

5.**Доступ к документации API:**

   - **Swagger UI:** [http://localhost:8000/api/docs/](http://localhost:8000/api/docs/)
   - **Redoc:** [http://localhost:8000/api/redoc/](http://localhost:8000/api/redoc/)

## API документация

### Аутентификация

Аутентификация осуществляется с помощью JWT-токенов. После успешной верификации кода подтверждения пользователь получает токены `access` и `refresh`. Токен `access` используется для доступа к защищенным эндпоинтам.

**Заголовки для защищенных запросов:**

```http
Authorization: Bearer <access_token>
```

### Эндпоинты

1. **Генерация кода подтверждения:** `/api/generate_code/`
2. **Верификация кода и получение токенов:** `/api/verify_code/`
3. **Просмотр профиля пользователя:** `/api/profile/`
4. **Активация инвайт-кода:** `/api/profile/`
5. **Обновление токена доступа:** `/api/token/refresh/`

Подробное описание эндпоинтов приведено в документации Swagger и Redoc.

## Тестирование

Вы можете использовать **curl** или **Postman** для тестирования API.

## Примечания

- **Проверка номера телефона:** Номер телефона должен быть в формате `+1234567890` и содержать от 10 до 15 цифр.
- **Безопасность:** Коды подтверждения возвращаются в ответе сервера для упрощения тестирования. В реальном приложении рекомендуется отправлять код по SMS.
